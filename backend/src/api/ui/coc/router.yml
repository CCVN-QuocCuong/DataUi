create-coc-lambda-function:
  handler: src/api/ui/coc/create.handler
  events:
    - http:
        path: coc
        method: post
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer } 
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1
  timeout: 180

update-coc-lambda-function:
  handler: src/api/ui/coc/update.handler
  events:
    - http:
        path: coc
        method: put
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1
  timeout: 180


get-coc-list-lambda-function:
  handler: src/api/ui/coc/list.handler
  events:
    - http:
        path: cocs
        method: get
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1

filter-coc-list-by-params-lambda-function:
  handler: src/api/ui/coc/filter.handler
  events:
    - http:
        path: cocs
        method: post
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1

get-coc-detail-by-cocid-lambda-function:
  handler: src/api/ui/coc/get.handler
  events:
    - http:
        path: coc/{id}
        method: get
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1

get-coc-versions-lambda-function:
  handler: src/api/ui/coc/list_version.handler
  events:
    - http:
        path: coc/{id}/versions
        method: get
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1

search-coc-list-by-params-lambda-function:
  handler: src/api/ui/coc/search.handler
  events:
    - http:
        path: cocs/search
        method: post
        cors:
          origin: '*'
          headers:
            - Content-Type
            - X-Amz-Date
            - Authorization
            - X-Api-Key
            - X-Amz-Security-Token
            - X-Amz-User-Agent
          allowCredentials: true
        authorizer:
          arn: ${self:provider.environment.COGNITO_USER_POOL_ARN}
  layers:
    - { Ref: DependenciesLambdaLayer }
    - arn:aws:lambda:ap-southeast-2:770693421928:layer:Klayers-p38-aws-psycopg2:1